<!-- src/app/pages/inventory-details/inventory-details.html -->
<div class="inventory-details-container">

  <inventory-page-header></inventory-page-header>
  <main focusOnNavigation aria-label="Inventory details" id="inventory-details" class="inventory-details">
    <form [formGroup]="updateInventoryForm" (ngSubmit)="updateInventoryItem()" class="mat-elevation-z2">
      <div class="inventory-details-grid">

        <div>
          <!-- Heading for the firewall information section -->
          <h3>Firewall Information</h3>

          <!-- Form field for entering the hostname -->
          <div class="form-field">
            <mat-form-field>
              <mat-label>Hostname</mat-label>
              <!-- Input field for the hostname, bound to the 'hostname' form control -->
              <!-- The 'required' attribute ensures that the field is mandatory -->
              <input matInput id="hostname" formControlName="hostname" required>
            </mat-form-field>
          </div>

          <!-- Form field for entering additional notes -->
          <div class="form-field">
            <mat-form-field>
              <mat-label>Notes</mat-label>
              <!-- Input field for notes, bound to the 'notes' form control -->
              <input matInput id="notes" formControlName="notes">
            </mat-form-field>
          </div>
        </div>

        <div>
          <!-- Heading for the platform information section -->
          <h3>Platform Information</h3>

          <!-- Form field for selecting the inventory type -->
          <div class="form-field">
            <mat-form-field>
              <mat-label>Inventory Type</mat-label>
              <!-- Select dropdown for choosing the device type, bound to the 'deviceType' form control -->
              <!-- The 'aria-labelledby' attribute improves accessibility by associating the label with the select element -->
              <mat-select id="deviceType" formControlName="deviceType" aria-labelledby="deviceTypeLabel">
                <!-- Option for selecting 'Firewall' as the device type -->
                <mat-option value="Firewall">Firewall</mat-option>
                <!-- Option for selecting 'Panorama' as the device type -->
                <mat-option value="Panorama">Panorama</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- Form field for selecting the platform -->
          <div class="form-field">
            <mat-form-field>
              <mat-label>Platform</mat-label>
              <!-- Select dropdown for choosing the platform, bound to the 'platformName' form control -->
              <!-- The 'aria-labelledby' attribute improves accessibility by associating the label with the select element -->
              <mat-select formControlName="platformName" aria-labelledby="platformLabel">
                <!-- Option for each platform name based on the selected device type -->
                <!-- Uses an *ngFor directive to iterate over the platform names -->
                <!-- Conditionally selects the platform names based on the selected device type -->
                <mat-option
                  *ngFor="let platformName of updateInventoryForm.get('deviceType')?.value === 'Firewall' ? firewallPlatforms : panoramaPlatforms"
                  [value]="platformName.name">
                  {{platformName.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div>
          <!-- Heading for the network information section -->
          <h3>Network Information</h3>

          <!-- Form field for entering the IPv4 address -->
          <div class="form-field">
            <mat-form-field>
              <mat-label>IPv4 Address</mat-label>
              <!-- Input field for the IPv4 address, bound to the 'ipv4Address' form control -->
              <!-- The 'required' attribute ensures that the field is mandatory -->
              <input matInput id="ipv4Address" formControlName="ipv4Address" required>
            </mat-form-field>
          </div>

          <!-- Form field for entering the IPv6 address -->
          <div class="form-field">
            <mat-form-field>
              <mat-label>IPv6 Address</mat-label>
              <!-- Input field for the IPv6 address, bound to the 'ipv6Address' form control -->
              <!-- The IPv6 address field is optional -->
              <input matInput id="ipv6Address" formControlName="ipv6Address">
            </mat-form-field>
          </div>
        </div>

        <div>
          <!-- Heading for the high availability section -->
          <h3>High Availability</h3>

          <!-- Form field for enabling/disabling high availability -->
          <div class="form-field">
            <!-- Checkbox for toggling high availability, bound to the 'ha' form control -->
            <mat-checkbox formControlName="ha">HA Enabled</mat-checkbox>
          </div>

          <!-- Conditional form field for specifying the HA peer -->
          <!-- Displayed only when high availability is enabled -->
          <div class="form-field" *ngIf="updateInventoryForm.get('ha')?.value === true">
            <mat-form-field>
              <mat-label>HA Peer</mat-label>
              <!-- Input field for the HA peer, bound to the 'haPeer' form control -->
              <input matInput id="haPeer" formControlName="haPeer">
            </mat-form-field>
          </div>
        </div>

        <!-- Conditional section for Panorama information, displayed only if the selected device type is 'Firewall' -->
        <div *ngIf="updateInventoryForm.get('deviceType')?.value === 'Firewall'">
          <!-- Heading for the Panorama information section -->
          <h3>Panorama Information</h3>

          <!-- Checkbox for indicating if the firewall is managed by Panorama -->
          <div class="form-field" *ngIf="updateInventoryForm.get('deviceType')?.value === 'Firewall'">
            <mat-checkbox formControlName="panoramaManaged">Panorama Managed</mat-checkbox>
          </div>

          <!-- Form field for entering the Panorama appliance, displayed only if the firewall is managed by Panorama -->
          <div class="form-field"
            *ngIf="updateInventoryForm.get('deviceType')?.value === 'Firewall' && updateInventoryForm.get('panoramaManaged')?.value === true">
            <mat-form-field>
              <mat-label>Panorama Appliance</mat-label>
              <!-- Input field for the Panorama appliance, bound to the 'panoramaAppliance' form control -->
              <input matInput id="panoramaAppliance" formControlName="panoramaAppliance">
            </mat-form-field>
          </div>

          <!-- Form field for entering the device group, displayed only if the firewall is managed by Panorama -->
          <div class="form-field"
            *ngIf="updateInventoryForm.get('deviceType')?.value === 'Firewall' && updateInventoryForm.get('panoramaManaged')?.value === true">
            <mat-form-field>
              <mat-label>Device Group</mat-label>
              <!-- Input field for the device group, bound to the 'deviceGroup' form control -->
              <input matInput id="deviceGroup" formControlName="deviceGroup">
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="button-container">
        <!-- Cancel button -->
        <button mat-raised-button color="warn" type="button" (click)="onCancel()">
          Cancel
        </button>

        <!-- Create button -->
        <button mat-raised-button color="primary" type="submit" [disabled]="updateInventoryForm.invalid">
          Create
        </button>
      </div>
    </form>
  </main>
  <app-footer></app-footer>
</div>
